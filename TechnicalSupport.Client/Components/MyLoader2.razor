@if (CurrentTheme != "")
{
<div class="overlay fullscreen-fixed"></div>

<div class="loader-wrapper fullscreen-fixed @LoaderThemeClass">
    <div class="loader-content shadow-lg rounded">
        <img src="images/loading.gif" alt="Loading" class="img-fluid" />
        <label>@LoaderText</label>
    </div>
</div>
}

<style>
    .img-fluid {
        width: 70px;
        height: 70px;
        object-fit: contain;
    }

    .fullscreen-fixed {
        position: fixed;
        inset: 0; /* shorthand for top:0;right:0;bottom:0;left:0 */
        width: calc(100wh - 100px);
        height: calc(100vh - 55px);
        overflow: hidden;
    }

    .overlay {
        background-color: black;
        opacity: 0.5;
        z-index: 9998;
    }

    .loader-wrapper {
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .loader-content {
        background-color: var(--loader-bg);
        color: var(--loader-text);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 15px;
        min-width: 150px;
    }

    .loader-light {
        --loader-bg: #fff;
        --loader-text: #000;
    }

    .loader-dark {
        --loader-bg: #121212;
        --loader-text: #ccc;
    }
</style>

@code {
    [CascadingParameter(Name = "CurrentTheme")]
    public string? CurrentTheme { get; set; }

    [Parameter] public string LoaderText { get; set; } = "Loading...";

    [Parameter] public EventCallback<bool> VisibleChanged { get; set; }

    public string LoaderThemeClass => CurrentTheme == "Dark" ? "loader-dark" : "loader-light";
}
